import{ag as a,b as o,X as p,Z as l}from"./vendor.1906794a.js";import{l as c,u as m}from"./LayerView.31466adc.js";import{i as n}from"./GraphicContainer.33c8eea2.js";import{i as h}from"./BaseGraphicContainer.d5f8ca0a.js";import"./Container.3129b529.js";import"./Utils.dc5734bd.js";import"./Texture.e5002286.js";import"./CIMSymbolHelper.96d440ee.js";import"./BidiEngine.aae60613.js";import"./definitions.21e97413.js";import"./GeometryUtils.d4e26b77.js";import"./projectionSupport.e16039e3.js";import"./json.2d0d6862.js";import"./VertexArrayObject.fb67875c.js";import"./FeatureContainer.76fc9ec8.js";import"./TileContainer.26dac650.js";import"./WGLContainer.85960f9a.js";import"./ShaderCompiler.c7c7b63f.js";import"./config.2a39d8a4.js";import"./GeometryUtils.ea8c8742.js";import"./MaterialKey.301bf49f.js";import"./pixelUtils.e90a335a.js";import"./earcut.f20dd8d8.js";import"./visualVariablesUtils.c887ba43.js";import"./visualVariablesUtils.a2feeb91.js";import"./Matcher.a4434050.js";import"./tileUtils.38de3c83.js";import"./TileClipper.37214276.js";import"./cimSymbolUtils.6ee77631.js";import"./quantizationUtils.f38724ee.js";import"./devEnvironmentUtils.444b8fd1.js";import"./schemaUtils.a83c8525.js";import"./MD5.f9440c6b.js";import"./util.aa5f648b.js";import"./ComputedAttributeStorage.1ad4cf86.js";import"./FeatureSetReader.deb82ddc.js";import"./centroid.4d0eaa21.js";import"./vec3f32.9cc42d31.js";let s=class extends c(m){constructor(){super(...arguments),this._handles=new a,this._popupTemplates=new Map,this.graphicsViews=[]}async hitTest(e,t){return this.graphicsViews.length?(await Promise.all(this.graphicsViews.map(i=>i.hitTest(e)))).flat().filter((i,r)=>(i&&(i.popupTemplate=this._popupTemplates.get(this.graphicsViews[r]),i.layer=this.layer,i.sourceLayer=this.layer),!!i)):null}update(e){if(this.graphicsViews)for(const t of this.graphicsViews)t.processUpdate(e)}attach(){o(this.layer.featureCollections)||this.layer.featureCollections.forEach(e=>{const t=new h({view:this.view,graphics:e.source,requestUpdateCallback:()=>this.requestUpdate(),container:new n(this.view.featuresTilingScheme)});t.renderer=e.renderer,this._popupTemplates.set(t,e.popupTemplate),this.graphicsViews.push(t),this.container.addChild(t.container)})}detach(){this.container.removeAllChildren();for(const e of this.graphicsViews)e.destroy();this.graphicsViews.length=0,this._handles.removeAll(),this._popupTemplates=null}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews)e.viewChange()}};s=p([l("esri.views.2d.layers.RouteLayerView2D")],s);const N=s;export{N as default};
